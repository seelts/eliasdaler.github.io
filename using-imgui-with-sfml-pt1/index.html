<!doctype html><html><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><link rel="shortcut icon" href=https://eliasdaler.github.io/favicon.ico><link rel=stylesheet href=/css/style.min.css><link rel=me href=https://mastodon.gamedev.place/@eliasdaler><link rel=alternate type=application/rss+xml href=https://eliasdaler.github.io/feed.xml title="Elias Daler's blog"><title>Using Dear ImGui with SFML for creating awesome game dev tools</title></head><body><header id=banner><h2><a href=https://eliasdaler.github.io>Elias Daler's blog</a></h2><nav><ul></ul></nav></header><main id=content><article><header id=post-header><h1>Using Dear ImGui with SFML for creating awesome game dev tools</h1><div>Publication date: <time>July 10, 2016</time></div><div></div></header><p>Related article: <a href=https://eliasdaler.github.io/using-imgui-with-sfml-pt2/>Using ImGui with modern C++ and STL</a></p><hr><p>This is the first part of tutorial about Dear ImGui (AKA ImGui) and it&rsquo;ll show you how to set it up with SFML. The second part will be library agnostic and will talk about common ways of doing stuff in ImGui, some awesome widgets and some useful STL overloads.</p><figure><img src=imgui-widgets.png><figcaption><h4>Different Dear ImGui widgets</h4></figcaption></figure><div><h2>Table Of Contents</h2><nav id=TableOfContents><ul><li><a href=#introduction>Introduction</a></li><li><a href=#dear-imgui-and-immediate-mode-gui-concept>Dear ImGui and immediate mode GUI concept</a></li><li><a href=#using-imgui-sfml>Using ImGui-SFML</a><ul><li><a href=#option-a-using-imgui-sfml-with-cmake>Option A. Using ImGui-SFML with CMake</a></li><li><a href=#option-b-using-imgui-sfml-with-vcpkg-and-conan>Option B. Using ImGui-SFML with vcpkg and Conan</a></li><li><a href=#option-c-manual-integration>Option C. Manual integration</a></li></ul></li><li><a href=#useful-overloads-for-sfml>Useful overloads for SFML</a></li><li><a href=#conclusion>Conclusion</a></li></ul></nav></div><hr><h2 id=introduction>Introduction</h2><p>Having good content creation (level editor, resource editor, etc.) and debugging
tools for your game is very important and can lead to productivity and
creativity boost. Here are some examples of tools I managed to make with ImGui
for my games.</p><figure><img src=tomb-painter-dev-tools.png><figcaption><h4>Tomb Painter dev tools</h4></figcaption></figure><figure><img src=recreation-level-editor.gif><figcaption><h4>Level editor in Re:creation</h4></figcaption></figure><figure><img src=recreation-lua-console.gif><figcaption><h4>Lua console</h4></figcaption></figure><figure><img src=recreation-animation-editor.gif><figcaption><h4>Animation editor</h4></figcaption></figure><p>As you can see there&rsquo;s a wide range of widgets that ImGui provides and there are lots of other great examples of how other people use it here.</p><h2 id=dear-imgui-and-immediate-mode-gui-concept>Dear ImGui and immediate mode GUI concept</h2><p>Dear ImGui is an immediate mode GUI library which makes making GUI for all kinds of tools very easy.</p><p><strong>Immediate mode GUI</strong> is a bit different to what people think when they hear “GUI” (“retained mode” is a classic way of doing GUI).
Immediate mode GUI is a way of doing GUI which involves creating and drawing widgets in each frame. Instead of creating some <code>Button</code> object and adding a callback to it, you write something like</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-cpp data-lang=cpp><span style=display:flex><span><span style=font-weight:700>if</span> (ImGui<span style=font-weight:700>::</span>Button(<span style=color:#b84>&#34;Some Button&#34;</span>)) {
</span></span><span style=display:flex><span>    ... <span style=color:#998;font-style:italic>// code which will be called on button pressed
</span></span></span><span style=display:flex><span><span style=color:#998;font-style:italic></span>}
</span></span></code></pre></div><p>Simple as that!</p><p>For a great in-depth talk on this concept, I recommend to check out <a href=https://mollyrocket.com/861>Casey Muratori&rsquo;s talk on IMGUI</a>.</p><p>Back to Dear ImGui. It&rsquo;s:</p><ul><li>MIT Licensed</li><li>Very fast and light</li><li>Constantly updated and expanded</li><li>Doesn&rsquo;t do dynamic allocation/deallocation</li><li>Very portable – has lots of bindings for different libraries and frameworks</li><li>Easily expandable</li></ul><h2 id=using-imgui-sfml>Using ImGui-SFML</h2><p><a href=https://github.com/eliasdaler/imgui-sfml>ImGui-SFML</a> is a binding I wrote to
simplify usage of ImGui with SFML. Here&rsquo;s how you can use it.</p><h3 id=option-a-using-imgui-sfml-with-cmake>Option A. Using ImGui-SFML with CMake</h3><blockquote class=hint-info>You can just see this <a href=https://github.com/eliasdaler/imgui-sfml-fetchcontent>example</a> of how to use FetchContent to make it easy.</blockquote><p>First, you need to download Dear ImGui, ImGui-SFML and build SFML somewhere.</p><p>Then, run this where you want to build ImGui-SFML:</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>cmake &lt;ImGui-SFML repo folder&gt; -DIMGUI_DIR<span style=font-weight:700>=</span>&lt;ImGui repo folder&gt; <span style=color:#b84>\
</span></span></span><span style=display:flex><span><span style=color:#b84></span>                               -DSFML_DIR<span style=font-weight:700>=</span>&lt;path with built SFML&gt;
</span></span></code></pre></div><p>If you have SFML installed on your system, you don&rsquo;t need to set SFML_DIR during
configuration.</p><p>You can also specify <code>BUILD_SHARED_LIBS=ON</code> to build ImGui-SFML as a shared library. To build ImGui-SFML examples, set <code>IMGUI_SFML_BUILD_EXAMPLES=ON</code>.</p><p>After the building, you can install the library on your system by running:</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>cmake --build . --target install
</span></span></code></pre></div><p>If you set <code>CMAKE_INSTALL_PREFIX</code> during configuration, you can install ImGui-SFML locally.</p><p>Integrating into your project is simple:</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-cmake data-lang=cmake><span style=display:flex><span><span style=color:#999>find_package</span>(<span style=color:#b84>ImGui-SFML</span> <span style=color:#b84>REQUIRED</span>)<span style=color:#a61717;background-color:#e3d2d2>
</span></span></span><span style=display:flex><span><span style=color:#a61717;background-color:#e3d2d2></span><span style=color:#999>target_link_libraries</span>(<span style=color:#b84>my_target</span> <span style=color:#b84>PRIVATE</span> <span style=color:#b84>ImGui-SFML::ImGui-SFML</span>)<span style=color:#a61717;background-color:#e3d2d2>
</span></span></span></code></pre></div><p>If CMake can&rsquo;t find ImGui-SFML on your system (or you didn&rsquo;t install it), just define <code>ImGui-SFML_DIR</code> before calling <code>find_package</code>.</p><h3 id=option-b-using-imgui-sfml-with-vcpkg-and-conan>Option B. Using ImGui-SFML with vcpkg and Conan</h3><blockquote class=hint-warning>I don&rsquo;t maintain these packages so they might lag behind, so building <code>ImGui-SFML</code> manually is recommended</blockquote><ul><li><a href=https://vcpkg.info/port/imgui-sfml>vcpkg package</a></li><li><a href="https://bincrafters.jfrog.io/ui/packages/conan:%2F%2Fimgui-sfml?name=imgui-sfml&type=packages">Conan package</a></li></ul><h3 id=option-c-manual-integration>Option C. Manual integration</h3><p>This is slightly more complex&mldr;</p><ol><li><p>Use SFML to get a simple window to show up. Follow the “Getting started” tutorial <a href=http://www.sfml-dev.org/tutorials/2.3/>here</a> if you have never done it before.</p></li><li><p>Download <a href=https://github.com/ocornut/imgui>Dear ImGui</a>.</p></li><li><p>Download <a href=https://github.com/eliasdaler/imgui-sfml>ImGui-SFML</a>.</p><p><strong>Important</strong>: you have to add the contents of <strong>imconfig-SFML.h</strong> to ImGui&rsquo;s <strong>imconfig.h</strong> to get implicit <code>ImVec2</code> {% icon fa-arrows-h %} <code>sf::Vector2f</code> conversion working!
{: .message}</p></li><li><p>Add ImGui and ImGui-SFML directories to your include directories.</p></li><li><p>Add these files to your build / project:</p><ul><li>imgui.cpp</li><li>imgui_draw.cpp</li><li>imgui_widgets.cpp</li><li>imgui-SFML.cpp</li><li>imgui_demo.cpp</li></ul></li><li><p>(Optional) If you get linking errors, link OpenGL to your project.</p></li></ol><p>Here&rsquo;s a complete example of using ImGui and SMFL together.</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-cpp data-lang=cpp><span style=display:flex><span><span style=color:#999;font-weight:700>#include</span> <span style=color:#999;font-weight:700>&#34;imgui.h&#34;</span><span style=color:#999;font-weight:700>
</span></span></span><span style=display:flex><span><span style=color:#999;font-weight:700>#include</span> <span style=color:#999;font-weight:700>&#34;imgui-SFML.h&#34;</span><span style=color:#999;font-weight:700>
</span></span></span><span style=display:flex><span><span style=color:#999;font-weight:700></span>
</span></span><span style=display:flex><span><span style=color:#999;font-weight:700>#include</span> <span style=color:#999;font-weight:700>&lt;SFML/Graphics/CircleShape.hpp&gt;</span><span style=color:#999;font-weight:700>
</span></span></span><span style=display:flex><span><span style=color:#999;font-weight:700>#include</span> <span style=color:#999;font-weight:700>&lt;SFML/Graphics/RenderWindow.hpp&gt;</span><span style=color:#999;font-weight:700>
</span></span></span><span style=display:flex><span><span style=color:#999;font-weight:700>#include</span> <span style=color:#999;font-weight:700>&lt;SFML/System/Clock.hpp&gt;</span><span style=color:#999;font-weight:700>
</span></span></span><span style=display:flex><span><span style=color:#999;font-weight:700>#include</span> <span style=color:#999;font-weight:700>&lt;SFML/Window/Event.hpp&gt;</span><span style=color:#999;font-weight:700>
</span></span></span><span style=display:flex><span><span style=color:#999;font-weight:700></span>
</span></span><span style=display:flex><span><span style=color:#458;font-weight:700>int</span> <span style=color:#900;font-weight:700>main</span>() {
</span></span><span style=display:flex><span>    sf<span style=font-weight:700>::</span>RenderWindow window(sf<span style=font-weight:700>::</span>VideoMode(<span style=color:#099>640</span>, <span style=color:#099>480</span>), <span style=color:#b84>&#34;ImGui + SFML = &lt;3&#34;</span>);
</span></span><span style=display:flex><span>    window.setFramerateLimit(<span style=color:#099>60</span>);
</span></span><span style=display:flex><span>    ImGui<span style=font-weight:700>::</span>SFML<span style=font-weight:700>::</span>Init(window);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    sf<span style=font-weight:700>::</span>CircleShape shape(<span style=color:#099>100.f</span>);
</span></span><span style=display:flex><span>    shape.setFillColor(sf<span style=font-weight:700>::</span>Color<span style=font-weight:700>::</span>Green);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    sf<span style=font-weight:700>::</span>Clock deltaClock;
</span></span><span style=display:flex><span>    <span style=font-weight:700>while</span> (window.isOpen()) {
</span></span><span style=display:flex><span>        sf<span style=font-weight:700>::</span>Event event;
</span></span><span style=display:flex><span>        <span style=font-weight:700>while</span> (window.pollEvent(event)) {
</span></span><span style=display:flex><span>            ImGui<span style=font-weight:700>::</span>SFML<span style=font-weight:700>::</span>ProcessEvent(window, event);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>            <span style=font-weight:700>if</span> (event.type <span style=font-weight:700>==</span> sf<span style=font-weight:700>::</span>Event<span style=font-weight:700>::</span>Closed) {
</span></span><span style=display:flex><span>                window.close();
</span></span><span style=display:flex><span>            }
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        ImGui<span style=font-weight:700>::</span>SFML<span style=font-weight:700>::</span>Update(window, deltaClock.restart());
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        ImGui<span style=font-weight:700>::</span>Begin(<span style=color:#b84>&#34;Hello, world!&#34;</span>);
</span></span><span style=display:flex><span>        ImGui<span style=font-weight:700>::</span>Button(<span style=color:#b84>&#34;Look at this pretty button&#34;</span>);
</span></span><span style=display:flex><span>        ImGui<span style=font-weight:700>::</span>End();
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        window.clear();
</span></span><span style=display:flex><span>        window.draw(shape);
</span></span><span style=display:flex><span>        ImGui<span style=font-weight:700>::</span>SFML<span style=font-weight:700>::</span>Render(window);
</span></span><span style=display:flex><span>        window.display();
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    ImGui<span style=font-weight:700>::</span>SFML<span style=font-weight:700>::</span>Shutdown();
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>You&rsquo;ll see something like this:</p><p><img src=rgb1.png alt="First example"></p><p>Try to change some stuff. Double click on r/g/b field to set values precisely, or just drag some widgets to change window&rsquo;s background color. Press the button to change window title.
Here, it works!</p><p><img src=rgb2.png alt="First example">
Awesome! Now let&rsquo;s see how it works.</p><p>ImGui is initialized by calling <code>ImGui::SFML::Init</code> function to which you pass your <code>sf::RenderWindow</code>. This creates internal default font atlas. See how you can use other fonts in <a href=https://github.com/eliasdaler/imgui-sfml#fonts-how-to>Fonts how-to section</a> of imgui-sfml&rsquo;s README.</p><p>Shutting down is done with <code>ImGui::SFML::Shutdown</code> call which cleans some things up. (Deleting internal font atlas, if it&rsquo;s used, for example).</p><p>There are two phases of using ImGui in your game loop: <strong>update</strong> and <strong>render</strong>.</p><p><strong>Updating</strong> consists of <em>event processing</em>, <em>state update</em> and <em>widget update</em>. Event processing is done by calling <code>ImGui::SFML::ProcessEvent</code> and it&rsquo;s almost the same as processing SFML events. It&rsquo;s used to process keyboard and mouse input and handle window resize and focus events. State update (which is being done by calling <code>ImGui::SFML::Update</code>) updates delta time which ImGui uses internally, so you have to pass it using your delta time clock, as well as mouse coordinates (or your window relative to which mouse coordinates will be taken). <code>ImGui::NewFrame</code> is also being called here and you can call ImGui widget creation functions after that. Calling stuff like <code>ImGui::Button</code> or <code>ImGui::Color3Edit</code> updates widgets and it also generates one draw list which is used for rendering later.</p><p><strong>Drawing</strong> is done with <code>ImGui::SFML::Render</code> call.</p><blockquote class=hint-danger>Don&rsquo;t call <code>ImGui::Render</code>, only call <code>ImGui::SFML::Render</code></blockquote><blockquote class=hint-info>You must create all widgets between <code>ImGui::SFML::Update()</code> and <code>ImGui::Render()</code>.</blockquote><p>If you&rsquo;re updating more than you draw, then you can either update ImGui once per frame or call <code>ImGui::EndFrame</code> at the end of your update function.</p><p>Widgets are easily created by calling corresponding functions (more about them in the next part). For example, you can call <code>ImGui::InputInt</code> and pass a pointer to int there.When you change widget&rsquo;s value, the integer is changed too.
Buttons work pretty easy too – they don&rsquo;t need callbacks, you just wrap code which you want to call after the button is pressed in <code>if(ImGui::Button(…)) { … }</code> and that&rsquo;s all you have to do.</p><p>Call <code>ImGui::ShowTestWindow</code> somewhere when you create widgets and you&rsquo;ll get a nice window with lots of examples of ImGui stuff. This is very useful as example of how to do stuff with ImGui. Just look for the thing you want to make in this test window and you&rsquo;ll easily find how to do it in corresponding part of imgui_demo.cpp.</p><h2 id=useful-overloads-for-sfml>Useful overloads for SFML</h2><p>There are also some useful overloads implemented in SFML ImGui binding. For example, you can use <code>ImGui::Image</code> and <code>ImGui::ImageButton</code> with <code>sf::Textures</code> and <code>sf::Sprites</code>! I&rsquo;ve also defined implicit conversions between <code>ImVec2</code> and <code>sf::Vector2f</code>, so you can pass <code>sf::Vector2f</code> to ImGui&rsquo;s functions without needing to cast explicitly. You can also draw lines and rects with <code>DrawLine</code>, <code>DrawRect</code>, <code>DrawRectFilled</code>.</p><h2 id=conclusion>Conclusion</h2><p>As you can see, using ImGui is easy and it&rsquo;s easy to start doing really impressive and useful stuff with it right away. Thank you for reading this tutorial, I hope it was useful and that ImGui will help you make better tools and greater games as the result of having awesome tools.</p></article></main><footer id=footer>© 2022 Elias Daler. All rights reserved.<p>subscribe via <a href=https://eliasdaler.github.io/feed.xml>RSS</a></p></footer></body></html>